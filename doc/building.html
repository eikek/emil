<!DOCTYPE html><html><head><title>Emil: Creating Mails</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="eikek" /><meta name="description" content="Emil – E-Mail library for Scala" /><meta name="og:image" content="/emil/img/poster.png" /><meta name="image" property="og:image" content="/emil/img/poster.png" /><meta name="og:title" content="Emil: Creating Mails" /><meta name="title" property="og:title" content="Emil: Creating Mails" /><meta name="og:site_name" content="Emil" /><meta name="og:url" content="https://github.com/eikek/emil" /><meta name="og:type" content="website" /><meta name="og:description" content="Emil – E-Mail library for Scala" /><link rel="icon" type="image/png" href="/emil/img/favicon.png" /><meta name="twitter:title" content="Emil: Creating Mails" /><meta name="twitter:image" content="/emil/img/poster.png" /><meta name="twitter:description" content="Emil – E-Mail library for Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="35x35" href="/emil/img/favicon.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/emil/highlight/styles/vs.css" /><link rel="stylesheet" href="/emil/css/light-style.css" /><link rel="stylesheet" href="/emil/css/emil.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/emil/" class="brand"><div class="brand-wrapper"></div><span>Emil</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/emil/index.html" title="Home" class="">Home</a></div> <div class="sidebar-nav-item  "><a href="/emil/examples" title="Examples" class="">Examples</a></div> <div class="sidebar-nav-item  open"><a href="/emil/doc" title="Documentation" class="drop-nested">Documentation</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/emil/doc/concept" title="Concept" class="">Concept</a> <a href="/emil/doc/building" title="Creating Mails" class="active">Creating Mails</a> <a href="/emil/doc/reading" title="Obtaining Mails" class="">Obtaining Mails</a> <a href="/emil/doc/syntax" title="Syntax Utilities" class="">Syntax Utilities</a></div></div> <div class="sidebar-nav-item  "><a href="/emil/extensions" title="Extension Modules" class="drop-nested">Extension Modules</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/emil/ext/tnef" title="Extract TNEF" class="">Extract TNEF</a> <a href="/emil/ext/doobie" title="Doobie Integration" class="">Doobie Integration</a> <a href="/emil/ext/markdown" title="Markdown Bodies" class="">Markdown Bodies</a> <a href="/emil/ext/jsoup" title="Jsoup" class="">Jsoup</a></div></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/eikek/emil" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/eikek/emil" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="eikek" data-github-repo="emil"><div class="content-wrapper"><section><h1 id="creating-mails">Creating Mails</h1>

<p>The <code class="language-plaintext highlighter-rouge">Mail</code> class in <code class="language-plaintext highlighter-rouge">emil-common</code> is used to represent an
e-mail. Using the <code class="language-plaintext highlighter-rouge">MailBuilder</code> makes creating values more
convenient. The <code class="language-plaintext highlighter-rouge">MailBuilder</code> works by collecting a list of
transformations to an initial <code class="language-plaintext highlighter-rouge">Mail</code> object and applying them when
invoking the <code class="language-plaintext highlighter-rouge">build</code> method. There exists a set of predefined
transformations to cover the most common things. But you can create
your own easily, too.</p>

<h2 id="simple-mails">Simple Mails</h2>

<p>Creating mails without attachments:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">cats.effect._</span><span class="o">,</span> <span class="nv">emil</span><span class="o">.</span><span class="py">_</span><span class="o">,</span> <span class="nv">emil</span><span class="o">.</span><span class="py">builder</span><span class="o">.</span><span class="py">_</span>

<span class="k">val</span> <span class="nv">mail</span><span class="k">:</span> <span class="kt">Mail</span><span class="o">[</span><span class="kt">IO</span><span class="o">]</span> <span class="k">=</span> <span class="nv">MailBuilder</span><span class="o">.</span><span class="py">build</span><span class="o">(</span>
  <span class="nc">From</span><span class="o">(</span><span class="s">"me@test.com"</span><span class="o">),</span>
  <span class="nc">To</span><span class="o">(</span><span class="s">"test@test.com"</span><span class="o">),</span>
  <span class="nc">Subject</span><span class="o">(</span><span class="s">"Hello!"</span><span class="o">),</span>
  <span class="nc">CustomHeader</span><span class="o">(</span><span class="nc">Header</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"my-email-client"</span><span class="o">)),</span>
  <span class="nc">TextBody</span><span class="o">(</span><span class="s">"Hello!\n\nThis is a mail."</span><span class="o">),</span>
  <span class="nc">HtmlBody</span><span class="o">(</span><span class="s">"&lt;h1&gt;Hello!&lt;/h1&gt;\n&lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"</span><span class="o">)</span>
<span class="o">)</span>
<span class="c1">// mail: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "test@test.com")),</span>
<span class="c1">//       cc = List(),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = Some(value = MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "Hello!",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "User-Agent",</span>
<span class="c1">//         value = NonEmptyList(head = "my-email-client", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = HtmlAndText(</span>
<span class="c1">//     text = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """Hello!</span>
<span class="c1">// </span>
<span class="c1">// This is a mail."""</span>
<span class="c1">//       )</span>
<span class="c1">//     ),</span>
<span class="c1">//     html = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """&lt;h1&gt;Hello!&lt;/h1&gt;</span>
<span class="c1">// &lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"""</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   attachments = Attachments(all = Vector())</span>
<span class="c1">// )</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Mail</code> defines an effect type, because the attachments and the
mail body does. Using <code class="language-plaintext highlighter-rouge">MailBuilder.build</code> already applies all
transformations and yields the final <code class="language-plaintext highlighter-rouge">Mail</code> instance. Using the
<code class="language-plaintext highlighter-rouge">MailBuilder.apply</code> instead, would return the <code class="language-plaintext highlighter-rouge">MailBuilder</code> instance
which can be further modified. It is also possible to go from an
existing <code class="language-plaintext highlighter-rouge">Mail</code> to a <code class="language-plaintext highlighter-rouge">MailBuilder</code> to change certain parts:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">builder</span> <span class="k">=</span> <span class="nv">mail</span><span class="o">.</span><span class="py">asBuilder</span>
<span class="c1">// builder: MailBuilder[IO] = emil.builder.MailBuilder@1791e231</span>
<span class="k">val</span> <span class="nv">mail2</span> <span class="k">=</span> <span class="n">builder</span><span class="o">.</span>
  <span class="n">clearRecipients</span><span class="o">.</span>
  <span class="nf">add</span><span class="o">(</span><span class="nc">To</span><span class="o">(</span><span class="s">"me2@test.com"</span><span class="o">)).</span>
  <span class="nf">set</span><span class="o">(</span><span class="nc">Subject</span><span class="o">(</span><span class="s">"Hello 2"</span><span class="o">)).</span>
  <span class="n">build</span>
<span class="c1">// mail2: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "me2@test.com")),</span>
<span class="c1">//       cc = List(),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = Some(value = MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "Hello 2",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "User-Agent",</span>
<span class="c1">//         value = NonEmptyList(head = "my-email-client", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = HtmlAndText(</span>
<span class="c1">//     text = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """Hello!</span>
<span class="c1">// </span>
<span class="c1">// This is a mail."""</span>
<span class="c1">//       )</span>
<span class="c1">//     ),</span>
<span class="c1">//     html = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """&lt;h1&gt;Hello!&lt;/h1&gt;</span>
<span class="c1">// &lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"""</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   attachments = Attachments(all = Vector())</span>
<span class="c1">// )</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">set</code> methods are both doing the same thing: appending
transformations. Both names exists for better reading; i.e. a recipient
is by default appended, but the subject is not. The methods accept a
list of transformations, too.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">mail3</span> <span class="k">=</span> <span class="nv">mail2</span><span class="o">.</span><span class="py">asBuilder</span><span class="o">.</span>
  <span class="n">clearRecipients</span><span class="o">.</span>
  <span class="nf">add</span><span class="o">(</span>
    <span class="nc">To</span><span class="o">(</span><span class="s">"me3@test.com"</span><span class="o">),</span>
    <span class="nc">Cc</span><span class="o">(</span><span class="s">"other@test.com"</span><span class="o">)</span>
  <span class="o">).</span>
  <span class="n">build</span>
<span class="c1">// mail3: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "me3@test.com")),</span>
<span class="c1">//       cc = List(MailAddress(name = None, address = "other@test.com")),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = Some(value = MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "Hello 2",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "User-Agent",</span>
<span class="c1">//         value = NonEmptyList(head = "my-email-client", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = HtmlAndText(</span>
<span class="c1">//     text = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """Hello!</span>
<span class="c1">// </span>
<span class="c1">// This is a mail."""</span>
<span class="c1">//       )</span>
<span class="c1">//     ),</span>
<span class="c1">//     html = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """&lt;h1&gt;Hello!&lt;/h1&gt;</span>
<span class="c1">// &lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"""</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   attachments = Attachments(all = Vector())</span>
<span class="c1">// )</span>
</code></pre></div></div>

<h2 id="mails-with-attachments">Mails with Attachments</h2>

<p>Adding attachments is the same as with other data. Creating
attachments might be more involved, depending on where the data is
coming from. Emil defines transformations to add attachments from
files, urls and java’s <code class="language-plaintext highlighter-rouge">InputStream</code> easily. Otherwise you need to get
a <code class="language-plaintext highlighter-rouge">Stream[F, Byte]</code> from somewhere else.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext</span>

<span class="k">val</span> <span class="nv">mail4</span> <span class="k">=</span> <span class="nv">mail3</span><span class="o">.</span><span class="py">asBuilder</span><span class="o">.</span><span class="py">add</span><span class="o">(</span>
  <span class="nc">AttachUrl</span><span class="o">[</span><span class="kt">IO</span><span class="o">](</span><span class="nv">getClass</span><span class="o">.</span><span class="py">getResource</span><span class="o">(</span><span class="s">"/files/Test.pdf"</span><span class="o">)).</span>
    <span class="nf">withFilename</span><span class="o">(</span><span class="s">"test.pdf"</span><span class="o">).</span>
    <span class="nf">withMimeType</span><span class="o">(</span><span class="nv">MimeType</span><span class="o">.</span><span class="py">pdf</span><span class="o">)).</span>
  <span class="n">build</span>
<span class="c1">// mail4: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "me3@test.com")),</span>
<span class="c1">//       cc = List(MailAddress(name = None, address = "other@test.com")),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = Some(value = MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "Hello 2",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "User-Agent",</span>
<span class="c1">//         value = NonEmptyList(head = "my-email-client", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = HtmlAndText(</span>
<span class="c1">//     text = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """Hello!</span>
<span class="c1">// </span>
<span class="c1">// This is a mail."""</span>
<span class="c1">//       )</span>
<span class="c1">//     ),</span>
<span class="c1">//     html = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """&lt;h1&gt;Hello!&lt;/h1&gt;</span>
<span class="c1">// &lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"""</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   attachments = Attachments(</span>
<span class="c1">//     all = Vector(</span>
<span class="c1">//       Attachment(</span>
<span class="c1">//         filename = Some(value = "test.pdf"),</span>
<span class="c1">//         mimeType = MimeType(</span>
<span class="c1">//           primary = "application",</span>
<span class="c1">//           sub = "pdf",</span>
<span class="c1">//           params = Map()</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<p>Emil creates a <code class="language-plaintext highlighter-rouge">Stream[F, Byte]</code> from the <code class="language-plaintext highlighter-rouge">java.net.URL</code> using the
<a href="https://github.com/functional-streams-for-scala/fs2/tree/master/io/src">fs2-io</a>
api. The same is available when attaching files and
<code class="language-plaintext highlighter-rouge">java.io.InputStream</code>s. Any given <code class="language-plaintext highlighter-rouge">Stream[F, Byte]</code> can be attached as
well:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">fs2.Stream</span>

<span class="k">val</span> <span class="nv">mydata</span><span class="k">:</span> <span class="kt">Stream</span><span class="o">[</span><span class="kt">IO</span>, <span class="kt">Byte</span><span class="o">]</span> <span class="k">=</span> <span class="nv">Stream</span><span class="o">.</span><span class="py">empty</span><span class="o">.</span><span class="py">covary</span><span class="o">[</span><span class="kt">IO</span><span class="o">]</span>
<span class="c1">// mydata: Stream[IO, Byte] = Stream(..)</span>

<span class="k">val</span> <span class="nv">mail5</span> <span class="k">=</span> <span class="nv">mail4</span><span class="o">.</span><span class="py">asBuilder</span><span class="o">.</span>
  <span class="n">clearAttachments</span><span class="o">.</span>
  <span class="nf">add</span><span class="o">(</span>
    <span class="nc">Attach</span><span class="o">(</span><span class="n">mydata</span><span class="o">).</span>
      <span class="nf">withFilename</span><span class="o">(</span><span class="s">"empty.txt"</span><span class="o">)</span>
  <span class="o">).</span>
  <span class="n">build</span>
<span class="c1">// mail5: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "me3@test.com")),</span>
<span class="c1">//       cc = List(MailAddress(name = None, address = "other@test.com")),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = Some(value = MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "Hello 2",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "User-Agent",</span>
<span class="c1">//         value = NonEmptyList(head = "my-email-client", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = HtmlAndText(</span>
<span class="c1">//     text = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """Hello!</span>
<span class="c1">// </span>
<span class="c1">// This is a mail."""</span>
<span class="c1">//       )</span>
<span class="c1">//     ),</span>
<span class="c1">//     html = Pure(</span>
<span class="c1">//       value = StringContent(</span>
<span class="c1">//         asString = """&lt;h1&gt;Hello!&lt;/h1&gt;</span>
<span class="c1">// &lt;p&gt;This &lt;b&gt;is&lt;/b&gt; a mail.&lt;/p&gt;"""</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   attachments = Attachments(</span>
<span class="c1">//     all = Vector(</span>
<span class="c1">//       Attachment(</span>
<span class="c1">//         filename = Some(value = "empty.txt"),</span>
<span class="c1">//         mimeType = MimeType(</span>
<span class="c1">//           primary = "application",</span>
<span class="c1">//           sub = "octet-stream",</span>
<span class="c1">//           params = Map()</span>
<span class="c1">// ...</span>
</code></pre></div></div>

<h2 id="custom-transformations">Custom Transformations</h2>

<p>Customs transformations can be easily created. It’s only a function
<code class="language-plaintext highlighter-rouge">Mail[F] =&gt; Mail[F]</code>. This can be handy, if there is a better way to
retrieve attachments, or just to create common headers.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">MyHeader</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">[</span><span class="kt">F</span><span class="o">[</span><span class="k">_</span><span class="o">]](</span><span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Trans</span><span class="o">[</span><span class="kt">F</span><span class="o">]</span> <span class="k">=</span>
    <span class="nc">CustomHeader</span><span class="o">(</span><span class="s">"X-My-Header"</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">mymail</span> <span class="k">=</span> <span class="nv">MailBuilder</span><span class="o">.</span><span class="py">build</span><span class="o">[</span><span class="kt">IO</span><span class="o">](</span>
  <span class="nc">To</span><span class="o">(</span><span class="s">"me@test.com"</span><span class="o">),</span>
  <span class="nc">MyHeader</span><span class="o">(</span><span class="s">"blablabla"</span><span class="o">),</span>
  <span class="nc">TextBody</span><span class="o">(</span><span class="s">"This is a text"</span><span class="o">)</span>
<span class="o">)</span>
<span class="c1">// mymail: Mail[IO] = Mail(</span>
<span class="c1">//   header = MailHeader(</span>
<span class="c1">//     id = "",</span>
<span class="c1">//     messageId = None,</span>
<span class="c1">//     folder = None,</span>
<span class="c1">//     recipients = Recipients(</span>
<span class="c1">//       to = List(MailAddress(name = None, address = "me@test.com")),</span>
<span class="c1">//       cc = List(),</span>
<span class="c1">//       bcc = List()</span>
<span class="c1">//     ),</span>
<span class="c1">//     sender = None,</span>
<span class="c1">//     from = None,</span>
<span class="c1">//     replyTo = None,</span>
<span class="c1">//     originationDate = None,</span>
<span class="c1">//     subject = "",</span>
<span class="c1">//     received = List(),</span>
<span class="c1">//     flags = Set()</span>
<span class="c1">//   ),</span>
<span class="c1">//   additionalHeaders = Headers(</span>
<span class="c1">//     all = List(</span>
<span class="c1">//       Header(</span>
<span class="c1">//         name = "X-My-Header",</span>
<span class="c1">//         value = NonEmptyList(head = "blablabla", tail = List())</span>
<span class="c1">//       )</span>
<span class="c1">//     )</span>
<span class="c1">//   ),</span>
<span class="c1">//   body = Text(text = Pure(value = StringContent(asString = "This is a text"))),</span>
<span class="c1">//   attachments = Attachments(all = Vector())</span>
<span class="c1">// )</span>
</code></pre></div></div>

<p>The above example simply delegates to an existing <code class="language-plaintext highlighter-rouge">Trans</code> constructor.</p>
</section></div></div></div></div><script src="/emil/highlight/highlight.pack.js"></script><script src="/emil/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script src="/emil/js/fathom.js"></script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/emil/js/search.js"></script><script src="/emil/js/docs.js"></script></body></html>